<link rel="import" href="/static/bower_components/polymer/polymer.html">
<link rel="import" href="/static/bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="/static/bower_components/paper-item/paper-item.html">
<link rel="import" href="/static/bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="/static/bower_components/paper-button/paper-button.html">
<link rel="import" href="/static/bower_components/iron-icons/iron-icons.html">
<link rel="import" href="/static/bower_components/paper-checkbox/paper-checkbox.html">

<dom-module id="project-button">
  <template>
    <paper-button raised on-tap="goLink">{{project}}</paper-button>
  </template>
  <script>
    Polymer({
      is: "project-button",
      properties: {
        project: String
      },
      goLink: function() {
        console.log(this.project);
        window.location.href = "http://localhost:8080/project/" + this.project;
      }
    });
  </script>
</dom-module>


<dom-module id="project-list">
  <style>
    :host {
      display: block;
    }
    
    paper-item {
      margin: 10px;
    }
    
    paper-button {
      margin: 0 30px;
    }
    
    paper-icon-button {
      margin: 0 5px;
    }
    
    paper-checkbox {
      margin: 0 15px;
    }
  </style>

  <template>
    <iron-ajax auto url="http://localhost:8080/api/projects" handle-as="json" on-response="handleResponse">
    </iron-ajax>
    <paper-item>
      <paper-icon-button icon="delete"></paper-icon-button>
      <paper-item-body>
        <paper-button nolink>project name</paper-button>
      </paper-item-body>
    </paper-item>
    <template is="dom-repeat" items="{{projects}}">
      <paper-item role="menuitemcheckbox">
        <paper-checkbox></paper-checkbox>
        <project-button project="{{item.name}}">
          {{item.name}}
        </project-button>
      </paper-item>
    </template>
  </template>

  <script>
    Polymer({
      is: "project-list",
      ready: function() {
        this.projects = [];
      },
      handleResponse: function(e) {
        this.projects = e.detail.response;
      }
    });
  </script>

</dom-module>